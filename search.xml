<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Activity四种启动模式执行流程]]></title>
      <url>http://blog.leonxtp.com/Activity%E5%9B%9B%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.html</url>
      <content type="html"><![CDATA[<h4 id="四种模式首次启动执行流程都一样："><a href="#四种模式首次启动执行流程都一样：" class="headerlink" title="四种模式首次启动执行流程都一样："></a>四种模式首次启动执行流程都一样：</h4><p>首次启动：<br>onCreate=&gt;onStart=&gt;onResume=&gt;onAttachedToWindow<br>去到其他Activity：<br>onPause=&gt;其他Activity执行onAttachedToWindow后=&gt;onStop<br>从其他activity返回：<br>onRestart=&gt;onStart=&gt;onResume<br>按Home键：<br>onPause=&gt;不可见后=&gt;onStop</p>
<h4 id="standard方式较为不同"><a href="#standard方式较为不同" class="headerlink" title="standard方式较为不同"></a>standard方式较为不同</h4><ul>
<li><strong>standard</strong>:<br><strong>连续</strong>再次启动：<br>onPause=&gt;onCreate=&gt;onStart=&gt;onResume=&gt;onAttachedToWindow=&gt;onStop<br>点击返回：<br>onPause=&gt;((执行要回到的activity中的方法)onRestart=&gt;onStart=&gt;onResume)=&gt;onStop=&gt;onDestroy</li>
</ul>
<h4 id="其他三种方式的执行流程基本差不多，但都只有一个实例"><a href="#其他三种方式的执行流程基本差不多，但都只有一个实例" class="headerlink" title="其他三种方式的执行流程基本差不多，但都只有一个实例"></a>其他三种方式的执行流程基本差不多，但都只有一个实例</h4><ul>
<li><strong>singleTop</strong>:<br><strong>连续</strong>启动(已在栈顶，不再重新创建实例)：<br>onPause=&gt;onNewIntent=&gt;onResume<br>点击返回：<br>onPause=&gt;onStop=&gt;onDestroy<br>已在栈中，但不在栈顶，再次启动，将重新创建实例，与standard一样</li>
<li><strong>singleInstance</strong>:<br><strong>连续</strong>启动(已在栈顶，不再次创建实例)：<br>onPause=&gt;onNewIntent=&gt;onResume<br>点击返回：<br>onPause=&gt;onStop=&gt;onDestroy<br>已在栈中，但不在栈顶，再次启动（移动到栈顶，不再次创建实例，不影响其他的activity）：<br>onNewIntent=&gt;onRestart=&gt;onStart=&gt;onResume</li>
<li><strong>singleTask</strong>:<br><strong>连续</strong>启动(已在栈顶，不再次创建实例)：<br>onPause=&gt;onNewIntent=&gt;onResume<br>点击返回：<br>onPause=&gt;onStop=&gt;onDestroy<br>已在栈中，但不在栈顶，再次启动(将处于它顶部以上的activity全都推出去，这样它就自动处于栈顶了)：<br>onNewIntent=&gt;onRestart=&gt;onStart=&gt;onResume</li>
</ul>
<p><br></p>
<blockquote>
<p>最近访客</p>
</blockquote>
<div class="ds-recent-visitors" data-num-items="28" data-avatar-size="42" id="ds-recent-visitors"></div>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[炸金花牌大小绝对值计算、比较及排序，包含花色参与和不参与大小比较]]></title>
      <url>http://blog.leonxtp.com/%E7%82%B8%E9%87%91%E8%8A%B1%E7%89%8C%E5%A4%A7%E5%B0%8F%E7%BB%9D%E5%AF%B9%E5%80%BC%E8%AE%A1%E7%AE%97%E3%80%81%E6%AF%94%E8%BE%83%E5%8F%8A%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%8C%85%E5%90%AB%E8%8A%B1%E8%89%B2%E5%8F%82%E4%B8%8E%E5%92%8C%E4%B8%8D%E5%8F%82%E4%B8%8E%E5%A4%A7%E5%B0%8F%E6%AF%94%E8%BE%83.html</url>
      <content type="html"><![CDATA[<p>昨日忽生兴趣，想起同事正在玩的一个炸金花游戏，见他们讨论略有激烈，想来蛮有趣，于是自己也写来玩玩。<br>因有要一次产生很多副牌的需求（可能上1000），要对所有的玩家进行一个排序，因此考虑一个能得到每幅牌的绝对大小的统一算法。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2018741-53bf8bb37d98a6f4.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="我有王炸"></p>
<h4 id="牌大小计算算法"><a href="#牌大小计算算法" class="headerlink" title="牌大小计算算法"></a>牌大小计算算法</h4><hr>
<h5 id="花色不参与大小比较"><a href="#花色不参与大小比较" class="headerlink" title="花色不参与大小比较:"></a>花色不参与大小比较:</h5><ul>
<li>首先对到手的牌按照牌数字按照由大到小排序</li>
<li>牌大小按照牌型分级</li>
<li>对于普通牌型，每张牌视为16进制的一个数，A对应14，2对应2，以此类推。牌值即为这幅此16进制牌的大小。<br>  比如最大的普通牌为AKJ，其16进制数值为AKJ=14x16x16+13x16+11=3803</li>
<li>对于对子，先将对子放在牌的前两位，则在最大普通牌大小的基础上，加上对子牌的本身大小。 对子的本身大小计算方法：比如最大的对子为AAK，则AAK=14x16+13=237，加上最大的普通牌值3803，即为4040</li>
<li>对于顺子，取最小的那个数，加上最大的对子牌值，比如最大的顺子AKQ=12+4040=4052。最小的顺子A32，A取1，值4041</li>
<li>对于同花，先按照普通牌型计算大小，再加上最大的对子牌值。<br>  比如最大的同花AKJ=3803+4052=7855</li>
<li>对于同花顺，取最小的那个数，加上最大的同花牌值，比如：<br>AKQ=12+7855=7867,最小的同花顺A32，A取1，A32=1+7855=7856</li>
<li>对于炸弹，取第一个数，加上最大的同花顺牌值。<br>  比如AAA=14+7867=7881</li>
</ul>
<h5 id="花色参与大小比较"><a href="#花色参与大小比较" class="headerlink" title="花色参与大小比较:"></a>花色参与大小比较:</h5><ul>
<li>比较规则：在牌数字完全一样的情况下，从最大的牌开始比较，黑桃&gt;红桃&gt;梅花&gt;方片，遇到一个较大的，则结束比较。如：红桃A+红桃Q+方片3&gt;梅花A+黑桃Q+黑桃3。如遇顺子时，数字3最大，从3开始比较花色。</li>
<li>花色值设定：黑桃=3红桃=2梅花=1方片=0。</li>
<li>牌值计算原理：在上面花色不参与大小比较算法的基础上，增加对每副计算出来的牌值乘以64再加上对三张牌花色按照4进制进行花色值计算作为附加值。比如：不考虑花色时，红桃6+方片4+方片2的值为6x256+4x16+2=1602，考虑花色时，红桃+方片+方片对应的4进制就是200，其10进制值为32，然后这副牌的牌值即为：1602x64+32=102560。为什么乘以64？因为三个花色4进制值的范围为63~0。乘以64，就是把原来每组牌值大小相邻的牌型拉开63个的间隔，以便于让花色值有发挥的空间哈哈，用来区别数字完全相同但花色不同的牌型。</li>
<li>如果是炸弹，先将炸弹按花色从大到小排序，保证比如黑桃A红桃A方片A会&gt;红桃A梅花A方片A</li>
</ul>
<h5 id="如此，就可得对所有的牌值进行了统一的大小计算"><a href="#如此，就可得对所有的牌值进行了统一的大小计算" class="headerlink" title="如此，就可得对所有的牌值进行了统一的大小计算"></a>如此，就可得对所有的牌值进行了统一的大小计算</h5><hr>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><p>主要分为四个模块</p>
<ul>
<li>entity 实体</li>
<li>player provider 发牌器</li>
<li>typevalue 牌型识别</li>
<li>calculator 计算器，提供不同方式的计算方法</li>
</ul>
<h6 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h6><p><em>Card 单张牌</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 单张牌</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Card</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FLOWER_SPADE = <span class="number">3</span>;<span class="comment">// 黑桃</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FLOWER_HEART = <span class="number">2</span>;<span class="comment">// 红桃</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FLOWER_CLUB = <span class="number">1</span>;<span class="comment">// 梅花</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FLOWER_DIAMOND = <span class="number">0</span>;<span class="comment">// 方片</span></div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_A = <span class="number">14</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_K = <span class="number">13</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_Q = <span class="number">12</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_J = <span class="number">11</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_10 = <span class="number">10</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_9 = <span class="number">9</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_8 = <span class="number">8</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_7 = <span class="number">7</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_6 = <span class="number">6</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_5 = <span class="number">5</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_4 = <span class="number">4</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_3 = <span class="number">3</span>;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUM_2 = <span class="number">2</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 单张牌大小</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> number;</div><div class="line">	<span class="comment">// 花色</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> flower;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Card</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Card</span><span class="params">(<span class="keyword">int</span> flower, <span class="keyword">int</span> number)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.flower = flower;</div><div class="line">		<span class="keyword">this</span>.number = number;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumber</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> number;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNumber</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.number = number;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFlower</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> flower;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlower</span><span class="params">(<span class="keyword">int</span> flower)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.flower = flower;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><em>玩家</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 玩家，对应一副牌</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Player</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> Card[] cards = <span class="keyword">new</span> Card[<span class="number">3</span>];</div><div class="line">	<span class="comment">// 牌类型</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> type;</div><div class="line">	<span class="comment">// 是否为特殊牌</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> isSpecial = <span class="keyword">false</span>;</div><div class="line">	<span class="comment">// A32也是顺子，比花色时，从3开始比较</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> isA32 = <span class="keyword">false</span>;</div><div class="line">	<span class="comment">// 牌绝对值大小</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> value;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Player</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Player</span><span class="params">(Card card0, Card card1, Card card2)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.cards[<span class="number">0</span>] = card0;</div><div class="line">		<span class="keyword">this</span>.cards[<span class="number">1</span>] = card1;</div><div class="line">		<span class="keyword">this</span>.cards[<span class="number">2</span>] = card2;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> Card[] getCards() &#123;</div><div class="line">		<span class="keyword">return</span> cards;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCards</span><span class="params">(Card[] cards)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.cards = cards;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getType</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> type;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.type = type;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> value;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.value = value;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSpecial</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> isSpecial;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpecial</span><span class="params">(<span class="keyword">boolean</span> isSpecial)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.isSpecial = isSpecial;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isA32</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> isA32;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA32</span><span class="params">(<span class="keyword">boolean</span> isA32)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.isA32 = isA32;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h6 id="PlayerProvider"><a href="#PlayerProvider" class="headerlink" title="PlayerProvider"></a>PlayerProvider</h6><p>发牌器接口，负责发牌、洗牌<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 发牌器</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PlayerProvider</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">// 产生单副牌</span></div><div class="line">	<span class="function">Player <span class="title">getSinglePlayer</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 产生多副牌</span></div><div class="line">	<span class="function">List&lt;Player&gt; <span class="title">getPlayers</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 发一张牌</span></div><div class="line">	<span class="function">Card <span class="title">getCard</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 洗牌</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">shuffle</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其具体实现有</p>
<ul>
<li>LimitedPlayerProvider 有限制的发牌器，从一幅牌中发牌</li>
<li>UnlimitedPlayerProvider 无玩家人数限制的发牌器，随机产生牌，不考虑玩家牌完全相同的情况，但一个玩家手中不会出现完全相同的牌。</li>
</ul>
<h6 id="TypeValueSetter"><a href="#TypeValueSetter" class="headerlink" title="TypeValueSetter"></a>TypeValueSetter</h6><p>负责对一副牌进行牌型鉴定，并根据牌型使用指定的计算器计算牌值<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 牌型识别器，负责鉴定牌型，并按照指定的模式计算牌大小</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TypeValueSetter</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> ValueCalculator calculator;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">TypeValueSetter</span><span class="params">(ValueCalculator calculator)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.calculator = calculator;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 判断牌型、计算牌型绝对值大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Player <span class="title">regPlayerType</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (isFlush(player)) &#123;</div><div class="line">			<span class="keyword">if</span> (isStraight(player)) &#123;<span class="comment">// 同花顺</span></div><div class="line">				player.setType(PlayerType.STRAIGHT_FLUSH);</div><div class="line">				player.setValue(calculator.getStraightFlushValue(player));</div><div class="line">			&#125; <span class="keyword">else</span> &#123;<span class="comment">// 同花</span></div><div class="line">				player.setType(PlayerType.FLUSH);</div><div class="line">				player.setValue(calculator.getFlushValue(player));</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isStraight(player)) &#123;<span class="comment">// 顺子</span></div><div class="line">			player.setType(PlayerType.STRAIGHT);</div><div class="line">			player.setValue(calculator.getStraightValue(player));</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isDouble(player)) &#123;</div><div class="line">			<span class="keyword">if</span> (isBmob(player)) &#123;<span class="comment">// 炸弹</span></div><div class="line">				player.setType(PlayerType.BOMB);</div><div class="line">				player.setValue(calculator.getBombValue(player));</div><div class="line">			&#125; <span class="keyword">else</span> &#123;<span class="comment">// 对子</span></div><div class="line">				player.setType(PlayerType.DOUBLE);</div><div class="line">				<span class="comment">// 将对子放到玩家牌的前两张的位置,以便于之后的牌值计算</span></div><div class="line">				PlayerUtil.moveDouble2Front(player);</div><div class="line">				player.setValue(calculator.getDoubleValue(player));</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;<span class="comment">// 普通牌</span></div><div class="line">			player.setType(PlayerType.NORMAL);</div><div class="line">			player.setValue(calculator.getNormalValue(player));</div><div class="line">			<span class="keyword">if</span> (isSpecial(player)) &#123;<span class="comment">// 对于特殊牌，本算法不提供特殊大小计算，外部调用者自行判断是否有炸弹玩家产生</span></div><div class="line">				player.setSpecial(<span class="keyword">true</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> player;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 是否同花</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isFlush</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getFlower() == player.cards[<span class="number">1</span>].getFlower()</div><div class="line">				&amp;&amp; player.cards[<span class="number">1</span>].getFlower() == player.cards[<span class="number">2</span>].getFlower();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 是否顺子,A32也是同花顺，是最小的同花顺(参考自百度百科)</span></div><div class="line">	<span class="comment">// 花色参与比较的时候，黑桃A红桃3黑桃2&lt;方片A黑桃3方片2</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isStraight</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">boolean</span> isNomalStraight = player.cards[<span class="number">0</span>].getNumber() == player.cards[<span class="number">1</span>].getNumber() + <span class="number">1</span></div><div class="line">				&amp;&amp; player.cards[<span class="number">1</span>].getNumber() == player.cards[<span class="number">2</span>].getNumber() + <span class="number">1</span>;</div><div class="line">		<span class="keyword">boolean</span> isA32 = player.cards[<span class="number">0</span>].getNumber() == <span class="number">14</span> &amp;&amp; player.cards[<span class="number">1</span>].getNumber() == <span class="number">3</span></div><div class="line">				&amp;&amp; player.cards[<span class="number">2</span>].getNumber() == <span class="number">2</span>;</div><div class="line">		<span class="keyword">if</span> (isA32) &#123;</div><div class="line">			player.setA32(<span class="keyword">true</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> isNomalStraight || isA32;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 是否炸弹</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isBmob</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getNumber() == player.cards[<span class="number">1</span>].getNumber()</div><div class="line">				&amp;&amp; player.cards[<span class="number">1</span>].getNumber() == player.cards[<span class="number">2</span>].getNumber();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 是否对子</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isDouble</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getNumber() == player.cards[<span class="number">1</span>].getNumber()</div><div class="line">				|| player.cards[<span class="number">1</span>].getNumber() == player.cards[<span class="number">2</span>].getNumber();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 是否特殊牌</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isSpecial</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getNumber() == <span class="number">5</span> &amp;&amp; player.cards[<span class="number">1</span>].getNumber() == <span class="number">3</span> &amp;&amp; player.cards[<span class="number">2</span>].getNumber() == <span class="number">2</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h6 id="ValueCalculator"><a href="#ValueCalculator" class="headerlink" title="ValueCalculator"></a>ValueCalculator</h6><p>牌值计算器接口，负责提供对一副牌的计算方法，<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 牌值计算器</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ValueCalculator</span> </span>&#123;</div><div class="line">	<span class="comment">// 获取炸弹牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getBombValue</span><span class="params">(Player player)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 获取同花顺牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getStraightFlushValue</span><span class="params">(Player player)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 获取同花牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getFlushValue</span><span class="params">(Player player)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 获取顺子牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getStraightValue</span><span class="params">(Player player)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 获取对子牌值绝对大小</span></div><div class="line">	<span class="comment">// 在判断牌型时，如果是对子，则将对子放在数组前面两位</span></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getDoubleValue</span><span class="params">(Player player)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 获取普通牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getNormalValue</span><span class="params">(Player player)</span></span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>具体实现有：<br><em>NonFlowerValueCalculator</em><br>花色不参与大小比较的计算器，牌越大，牌值越大<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"> * 花色不参与牌大小比较的计算器</div><div class="line"> * 牌值越大，牌越大</div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NonFlowerValueCalculator</span> <span class="keyword">implements</span> <span class="title">ValueCalculator</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">// 获取炸弹牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBombValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getNumber() + PlayerType.STRAIGHT_FLUSH_MAX_VALUE;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取同花顺牌值绝对大小,A32也是同花顺，是最小的同花顺(参考自百度百科)</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getStraightFlushValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (player.isA32()) &#123;</div><div class="line">			<span class="comment">//此时A就等于是1</span></div><div class="line">			<span class="keyword">return</span> <span class="number">1</span> + PlayerType.FLUSH_MAX_VALUE;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">2</span>].getNumber() + PlayerType.FLUSH_MAX_VALUE;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取同花牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFlushValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getNumber() * <span class="number">256</span> + player.cards[<span class="number">1</span>].getNumber() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getNumber()</div><div class="line">				+ PlayerType.STRAIGHT_MAX_VALUE;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取顺子牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getStraightValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (player.isA32()) &#123;</div><div class="line">			<span class="comment">//此时A就等于是1</span></div><div class="line">			<span class="keyword">return</span> <span class="number">1</span> + PlayerType.DOUBLE_MAX_VALUE;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">2</span>].getNumber() + PlayerType.DOUBLE_MAX_VALUE;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取对子牌值绝对大小</span></div><div class="line">	<span class="comment">// 在判断牌型时，如果是对子，则将对子放在数组前面两位</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDoubleValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">1</span>].getNumber() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getNumber() + PlayerType.NORMAL_MAX_VALUE;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取普通牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNormalValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getNumber() * <span class="number">256</span> + player.cards[<span class="number">1</span>].getNumber() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getNumber();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><em>FlowerValueCalculator</em> 花色参与大小比较的计算器，牌越大，牌值越大<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 花色参与牌值大小比较的计算器，牌值越大，牌越大</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlowerValueCalculator</span> <span class="keyword">implements</span> <span class="title">ValueCalculator</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getFlowerValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">0</span>].getFlower() * <span class="number">16</span> + player.cards[<span class="number">1</span>].getFlower() * <span class="number">4</span> + player.cards[<span class="number">2</span>].getFlower();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getA32FlowerValue</span><span class="params">(Player player)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> player.cards[<span class="number">1</span>].getFlower() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getFlower() * <span class="number">4</span> + player.cards[<span class="number">0</span>].getFlower();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取炸弹牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBombValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="comment">// 炸弹需要先对牌按花色大小排序，保证比如黑桃A红桃A方片A会&gt;红桃A梅花A方片A</span></div><div class="line">		PlayerUtil.sortPlayerByFlower(player);</div><div class="line">		<span class="keyword">return</span> (player.cards[<span class="number">0</span>].getNumber() + PlayerType.STRAIGHT_FLUSH_MAX_VALUE) * <span class="number">64</span> + getFlowerValue(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取同花顺牌值绝对大小,A32也是同花顺，是最小的同花顺(参考自百度百科)</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getStraightFlushValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (player.isA32()) &#123;</div><div class="line">			<span class="keyword">return</span> (<span class="number">1</span> + PlayerType.FLUSH_MAX_VALUE) * <span class="number">64</span> + getA32FlowerValue(player);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> (player.cards[<span class="number">2</span>].getNumber() + PlayerType.FLUSH_MAX_VALUE) * <span class="number">64</span> + getFlowerValue(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取同花牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFlushValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (player.cards[<span class="number">0</span>].getNumber() * <span class="number">256</span> + player.cards[<span class="number">1</span>].getNumber() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getNumber()</div><div class="line">				+ PlayerType.STRAIGHT_MAX_VALUE) * <span class="number">64</span> + getFlowerValue(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取顺子牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getStraightValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (player.isA32()) &#123;</div><div class="line">			<span class="keyword">return</span> (<span class="number">1</span> + PlayerType.DOUBLE_MAX_VALUE) * <span class="number">64</span> + getA32FlowerValue(player);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> (player.cards[<span class="number">2</span>].getNumber() + PlayerType.DOUBLE_MAX_VALUE) * <span class="number">64</span> + getFlowerValue(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取对子牌值绝对大小</span></div><div class="line">	<span class="comment">// 在判断牌型时，如果是对子，则将对子放在数组前面两位</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDoubleValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="comment">// 在花色参与计算大小时，将对子中的花色大的换到前面</span></div><div class="line">		PlayerUtil.exchangeSortedDoubleFlower(player);</div><div class="line">		<span class="keyword">return</span> (player.cards[<span class="number">1</span>].getNumber() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getNumber() + PlayerType.NORMAL_MAX_VALUE) * <span class="number">64</span></div><div class="line">				+ getFlowerValue(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 获取普通牌值绝对大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNormalValue</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (player.cards[<span class="number">0</span>].getNumber() * <span class="number">256</span> + player.cards[<span class="number">1</span>].getNumber() * <span class="number">16</span> + player.cards[<span class="number">2</span>].getNumber()) * <span class="number">64</span></div><div class="line">				+ getFlowerValue(player);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>PlayerType类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 对牌型分类，并提供牌大小值的算法，和已经计算好的牌型最大值 </div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PlayerType</span> </span>&#123;</div><div class="line">	<span class="comment">// 炸弹</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BOMB = <span class="number">5</span>;</div><div class="line">	<span class="comment">// 最大值AAA=14，加上同花顺6867=7881</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BOMB_MAX_VALUE = <span class="number">7881</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 同花顺，A32也是顺子，是最小的同花顺(参考自百度百科)</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STRAIGHT_FLUSH = <span class="number">4</span>;</div><div class="line">	<span class="comment">// 最大值AKQ=12，加上同花7855=7867</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STRAIGHT_FLUSH_MAX_VALUE = <span class="number">7867</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 同花</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FLUSH = <span class="number">3</span>;</div><div class="line">	<span class="comment">// 最大值AKJ，14*16*16+13*16+11=3803，加上顺子4052=7855</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FLUSH_MAX_VALUE = <span class="number">7855</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 顺子，A32也是顺子，是最小的同花顺(参考自百度百科)</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STRAIGHT = <span class="number">2</span>;</div><div class="line">	<span class="comment">// 最大值AKQ=12，加上对子的最大值基数4040=4052</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STRAIGHT_MAX_VALUE = <span class="number">4052</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 对子</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DOUBLE = <span class="number">1</span>;</div><div class="line">	<span class="comment">// 最大值AAK=14*16+13=237,加上普通牌的基数3803=4040</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DOUBLE_MAX_VALUE = <span class="number">4040</span>;</div><div class="line"></div><div class="line">	<span class="comment">// 普通牌，里面包含一种特殊牌532不同花色</span></div><div class="line">	<span class="comment">// 对于特殊牌，本算法不提供特殊大小计算，但会将这副牌标记为特殊牌</span></div><div class="line">	<span class="comment">// 外部调用者自行判断是否有炸弹玩家产生</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NORMAL = <span class="number">0</span>;</div><div class="line">	<span class="comment">// 最大值AKJ=14*16*16+13*16+11=3803</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NORMAL_MAX_VALUE = <span class="number">3803</span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>还有两个计算器就不贴代码了：</p>
<p><em>Low2HeighCalculator</em><br>花色不参与大小比较的计算器，牌越大，牌值越小<br><em>FlowerLow2HeighCalculator</em><br>花色参与大小比较的计算器，牌越大，牌值越小</p>
<h6 id="PlayerComparator-总指挥"><a href="#PlayerComparator-总指挥" class="headerlink" title="PlayerComparator 总指挥"></a>PlayerComparator 总指挥</h6><p>负责对牌初始化、牌型识别、牌值计算以及排序。你给我一副或者一组凌乱的牌，我让你整洁有序。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 牌型判断比较器，负责对所有玩家的牌大小进行计算和排序</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> Leon</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PlayerComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Player</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> TypeValueSetter recognizer;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PlayerComparator</span><span class="params">(ValueCalculator calculator)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.recognizer = <span class="keyword">new</span> TypeValueSetter(calculator);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 对玩家牌型进行牌型识别和牌值计算 这副牌三张都已经按照数字从大到小排好序</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@param</span> player</div><div class="line">	 *            一副牌</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setupRegularPlayer</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		recognizer.regPlayerType(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 对玩家牌型进行牌型识别和牌值计算 这副牌没有按照数字从大到小排好序</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@param</span> player</div><div class="line">	 *            一副牌</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setupUnRegularPlayer</span><span class="params">(Player player)</span> </span>&#123;</div><div class="line">		PlayerUtil.sortPlayerByNumber(player);</div><div class="line">		recognizer.regPlayerType(player);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 对玩家列表进行牌型判断、值获取及排序 每副牌的三张牌都已经按照数字从大到小排序</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@param</span> playersInput</div><div class="line">	 *            一组牌</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sortRegularPlayers</span><span class="params">(List&lt;Player&gt; playersInput)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (Player player : playersInput) &#123;</div><div class="line">			recognizer.regPlayerType(player);</div><div class="line">		&#125;</div><div class="line">		Collections.sort(playersInput, <span class="keyword">this</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 对玩家列表进行牌型判断、值获取及排序 每副牌的三张牌没有按照从大到小排序</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@param</span> playersInput</div><div class="line">	 *            一组牌</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sortUnRegularPlayers</span><span class="params">(List&lt;Player&gt; playersInput)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (Player player : playersInput) &#123;</div><div class="line">			PlayerUtil.sortPlayerByNumber(player);</div><div class="line">			recognizer.regPlayerType(player);</div><div class="line">		&#125;</div><div class="line">		Collections.sort(playersInput, <span class="keyword">this</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Player player1, Player player2)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> Integer.valueOf(player1.getValue()).compareTo(Integer.valueOf(player2.getValue()));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/LeonXtp/FriedGoldenFlower" target="_blank" rel="external">完整代码在Github上</a><br><br></p>
<blockquote>
<p>最近访客</p>
</blockquote>
<div class="ds-recent-visitors" data-num-items="28" data-avatar-size="42" id="ds-recent-visitors"></div>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[使用Hexo+Github Pages快速搭建个人博客资源总结]]></title>
      <url>http://blog.leonxtp.com/Good-articles-for-using-github-pages-hexo-duoshuo.html</url>
      <content type="html"><![CDATA[<ul>
<li><a href="http://sunwhut.com/2015/10/30/buildBlog/" target="_blank" rel="external">如何利用GitHub Pages和Hexo快速搭建个人博客</a> </li>
<li><a href="http://jiji262.github.io/2016/04/15/2016-04-15-hexo-github-pages-blog/" target="_blank" rel="external">手把手教你使用Hexo + Github Pages搭建个人独立博客</a></li>
</ul>
<a id="more"></a>
<ul>
<li><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexo官方文档</a></p>
</li>
<li><p><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">NexT主题官方文档</a></p>
</li>
<li><p><a href="http://elion.me/2016/05/13/hexo-pages.html" target="_blank" rel="external">为Hexo添加常用页面</a></p>
</li>
<li><p><a href="http://quantumman.me/blog/setting-up-a-domain-with-gitHub-pages.html" target="_blank" rel="external">github绑定阿里云域名</a></p>
</li>
<li><p><a href="https://zybuluo.com/mdeditor" target="_blank" rel="external">一款方便易用Chrome Markdown插件:StackEdit</a></p>
</li>
<li><p><a href="http://www.jianshu.com/p/0d54a590b81a" target="_blank" rel="external">SEO优化</a></p>
</li>
<li><p><a href="https://clearsky.me/hexo-deploy.html" target="_blank" rel="external">Hexo多部署–同时使用Coding和Github托管博客</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[我的第一篇个人博客]]></title>
      <url>http://blog.leonxtp.com/first-blog.html</url>
      <content type="html"><![CDATA[<blockquote>
<p>Be a fast learner, wide and deep thinker.</p>
</blockquote>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</div><div class="line">    System.out.println(<span class="string">"Hello Hexo!"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><blockquote class="blockquote-center">念念不忘, 必有回响</blockquote><br><br></p>
<blockquote>
<p>最近访客</p>
</blockquote>
<div class="ds-recent-visitors" data-num-items="28" data-avatar-size="42" id="ds-recent-visitors"></div>

]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://blog.leonxtp.com/hello-world.html</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
